# –ú–æ–¥—É–ª—å –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –≤ —Å—Ç–∏–ª–µ Astrot

–†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –ø–æ–ª–Ω–æ—Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π –º–æ–¥—É–ª—å –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã –¥–ª—è Telegram WebApp —Å —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–º –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–æ–º –∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–µ–π —Å OpenAI.

## ‚ú® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### üìù –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–ü—Ä–æ—Å—Ç–∞—è —Ñ–æ—Ä–º–∞**: –ò–º—è, –¥–∞—Ç–∞ —Ä–æ–∂–¥–µ–Ω–∏—è, –≤—Ä–µ–º—è —Å –æ–ø—Ü–∏–µ–π "–Ω–µ –∑–Ω–∞—é"
- **–ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –º–µ—Å—Ç–∞**: –ü–æ–∏—Å–∫ –≥–æ—Ä–æ–¥–æ–≤ —Å –∫–æ–æ—Ä–¥–∏–Ω–∞—Ç–∞–º–∏ –∏ —á–∞—Å–æ–≤—ã–º–∏ –ø–æ—è—Å–∞–º–∏
- **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏**: –°–∏—Å—Ç–µ–º–∞ –¥–æ–º–æ–≤ (–ü–ª–∞—Ü–∏–¥—É—Å/–¶–µ–ª—ã–µ –∑–Ω–∞–∫–∏)
- **–ü—Ä–∏–≤—è–∑–∫–∞ –∫ Telegram ID**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ —Å–æ—Ö—Ä–∞–Ω–µ–Ω–∏–µ –∏ –∑–∞–≥—Ä—É–∑–∫–∞ –ø—Ä–æ—Ñ–∏–ª—è

### üåü –†–∞—Å—á—ë—Ç –Ω–∞—Ç–∞–ª—å–Ω–æ–π –∫–∞—Ä—Ç—ã
- **Swiss Ephemeris**: –¢–æ—á–Ω—ã–µ –∞—Å—Ç—Ä–æ–ª–æ–≥–∏—á–µ—Å–∫–∏–µ –≤—ã—á–∏—Å–ª–µ–Ω–∏—è
- **Fallback —Å–∏—Å—Ç–µ–º–∞**: –†–∞–±–æ—Ç–∞ –¥–∞–∂–µ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π
- **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Å–∏—Å—Ç–µ–º –¥–æ–º–æ–≤**: Placidus –∏ Whole Sign
- **–û–±—Ä–∞–±–æ—Ç–∫–∞ –Ω–µ–∏–∑–≤–µ—Å—Ç–Ω–æ–≥–æ –≤—Ä–µ–º–µ–Ω–∏**: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç 12:00

### ü§ñ –ò–ò-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
- **OpenAI –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è**: –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –æ—Ç–≤–µ—Ç
- **Fallback —Ä–µ–∂–∏–º**: –†–∞–±–æ—Ç–∞ –±–µ–∑ API –∫–ª—é—á–∞
- **–ü–µ—Ä—Å–æ–Ω–∞–ª–∏–∑–∞—Ü–∏—è**: –£—á—ë—Ç –∏–º–µ–Ω–∏ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
- **–î—Ä—É–∂–µ–ª—é–±–Ω—ã–π —Ç–æ–Ω**: –ú–∏–Ω–∏–º—É–º –∂–∞—Ä–≥–æ–Ω–∞, –º–∞–∫—Å–∏–º—É–º –ø—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç–∏

### üì± –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å
- **–ö–∞—Ä—Ç–æ—á–∫–∏ —Å –∏–∫–æ–Ω–∫–∞–º–∏**: –ö—Ä–∞—Å–∏–≤–æ–µ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
- **Skeleton loading**: –ü–ª–∞–≤–Ω–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- **Fade-in –∞–Ω–∏–º–∞—Ü–∏–∏**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- **Responsive –¥–∏–∑–∞–π–Ω**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è –º–æ–±–∏–ª—å–Ω—ã—Ö —É—Å—Ç—Ä–æ–π—Å—Ç–≤

### üîÆ –ì–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è
- **–ü–µ—Ä—Å–æ–Ω–∞–ª—å–Ω—ã–µ –ø—Ä–µ–¥—Å–∫–∞–∑–∞–Ω–∏—è**: –ù–∞ –æ—Å–Ω–æ–≤–µ –¥–∞—Ç—ã —Ä–æ–∂–¥–µ–Ω–∏—è
- **–ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ**: 24-—á–∞—Å–æ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –≤ KV
- **–°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç**: –õ—é–±–æ–≤—å, –∫–∞—Ä—å–µ—Ä–∞, –∑–¥–æ—Ä–æ–≤—å–µ, —Å–æ–≤–µ—Ç—ã
- **–°—á–∞—Å—Ç–ª–∏–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã**: –ß–∏—Å–ª–∞, —Ü–≤–µ—Ç–∞, —É—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏

## üõ† –¢–µ—Ö–Ω–æ–ª–æ–≥–∏–∏

- **Next.js 14**: App Router, Server Components
- **TypeScript**: –ü–æ–ª–Ω–∞—è —Ç–∏–ø–∏–∑–∞—Ü–∏—è
- **Tailwind CSS**: –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Å—Ç–∏–ª–∏
- **Vercel KV**: –•—Ä–∞–Ω–µ–Ω–∏–µ –ø—Ä–æ—Ñ–∏–ª–µ–π
- **OpenAI API**: –ò–ò-–∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏
- **Telegram WebApp**: –ù–∞—Ç–∏–≤–Ω–∞—è –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è
- **Heroicons**: –ö—Ä–∞—Å–∏–≤—ã–µ –∏–∫–æ–Ω–∫–∏

## üì° API Endpoints

### `/api/profile` (CRUD)
- `GET ?tgId=123` - –ü–æ–ª—É—á–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `POST` - –°–æ–∑–¥–∞—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `PUT` - –û–±–Ω–æ–≤–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å
- `DELETE ?tgId=123` - –£–¥–∞–ª–∏—Ç—å –ø—Ä–æ—Ñ–∏–ª—å

### `/api/chart/calc`
- `POST` - –†–∞—Å—á—ë—Ç –ø–ª–∞–Ω–µ—Ç –∏ –¥–æ–º–æ–≤
- –ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∫–∞–∫ tgId, —Ç–∞–∫ –∏ –ø—Ä—è–º—ã–µ –¥–∞–Ω–Ω—ã–µ
- Fallback –Ω–∞ Swiss Ephemeris

### `/api/interpret`
- `POST` - OpenAI –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è –∫–∞—Ä—Ç—ã
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–π JSON –æ—Ç–≤–µ—Ç
- Fallback –Ω–∞ –±–∞–∑–æ–≤—ã–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏

### `/api/horoscope`
- `GET ?tgId=123&date=2024-01-01` - –ì–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è
- `POST` - –ì–µ–Ω–µ—Ä–∞—Ü–∏—è –Ω–æ–≤–æ–≥–æ –≥–æ—Ä–æ—Å–∫–æ–ø–∞
- 24-—á–∞—Å–æ–≤–æ–µ –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ

## üé® –ö–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

### `ProfileForm`
- –§–æ—Ä–º–∞ —Å–æ–∑–¥–∞–Ω–∏—è/—Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ—Ñ–∏–ª—è
- –ê–≤—Ç–æ–¥–æ–ø–æ–ª–Ω–µ–Ω–∏–µ –ª–æ–∫–∞—Ü–∏–∏
- –í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö
- Responsive –¥–∏–∑–∞–π–Ω

### `InterpretationCards`
- –û—Ç–æ–±—Ä–∞–∂–µ–Ω–∏–µ –∏–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏–∏ –∫–∞—Ä—Ç–æ—á–∫–∞–º–∏
- Skeleton loading —Å–æ—Å—Ç–æ—è–Ω–∏—è
- –ê–Ω–∏–º–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –ø–µ—Ä–µ—Ö–æ–¥—ã
- –ò–∫–æ–Ω–∫–∏ –¥–ª—è –∫–∞–∂–¥–æ–π –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

### `HoroscopeCard`
- –î–µ—Ç–∞–ª—å–Ω—ã–π –≥–æ—Ä–æ—Å–∫–æ–ø –¥–Ω—è
- –°—á–∞—Å—Ç–ª–∏–≤—ã–µ —ç–ª–µ–º–µ–Ω—Ç—ã
- –£—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏
- –°—Ç—Ä—É–∫—Ç—É—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å–æ–≤–µ—Ç—ã

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

- **–í–∞–ª–∏–¥–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: Zod —Å—Ö–µ–º—ã –¥–ª—è –≤—Å–µ—Ö API
- **Telegram –∞–≤—Ç–æ—Ä–∏–∑–∞—Ü–∏—è**: initDataUnsafe.user
- **–ò–∑–æ–ª—è—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö**: –ü—Ä–æ—Ñ–∏–ª–∏ –ø—Ä–∏–≤—è–∑–∞–Ω—ã –∫ tgId
- **Graceful fallbacks**: –†–∞–±–æ—Ç–∞ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API

## üöÄ –†–∞–∑–≤—ë—Ä—Ç—ã–≤–∞–Ω–∏–µ

1. **–£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**:
   ```bash
   pnpm install
   ```

2. **–ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è**:
   ```bash
   # .env.local
   OPENAI_API_KEY=sk-... # –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ
   KV_URL=redis://...    # –î–ª—è Vercel KV
   KV_REST_API_URL=...
   KV_REST_API_TOKEN=...
   ```

3. **–°–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫**:
   ```bash
   pnpm build
   pnpm start
   ```

## üìã –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö

### –ü—Ä–æ—Ñ–∏–ª—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
```typescript
interface Profile {
  tgId: number;
  name: string;
  birthDate: string;        // YYYY-MM-DD
  birthTime?: string;       // HH:mm
  timeUnknown: boolean;
  location: {
    name: string;
    lat: number;
    lon: number;
    timezone: string;
    tzOffset: number;
  };
  houseSystem: 'P' | 'W';   // Placidus | Whole Sign
  createdAt: string;
  updatedAt: string;
}
```

### –ò–Ω—Ç–µ—Ä–ø—Ä–µ—Ç–∞—Ü–∏—è
```typescript
interface Interpretation {
  summary: string;          // –û–±—â–∞—è —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫–∞
  personality: string;      // –õ–∏—á–Ω–æ—Å—Ç—å
  work_money: string;       // –†–∞–±–æ—Ç–∞ –∏ —Ñ–∏–Ω–∞–Ω—Å—ã
  love_social: string;      // –õ—é–±–æ–≤—å –∏ –æ—Ç–Ω–æ—à–µ–Ω–∏—è
  health_energy: string;    // –ó–¥–æ—Ä–æ–≤—å–µ –∏ —ç–Ω–µ—Ä–≥–∏—è
  today_focus: string;      // –§–æ–∫—É—Å –¥–Ω—è
  disclaimers: string[];    // –î–∏—Å–∫–ª–µ–π–º–µ—Ä—ã
}
```

### –ì–æ—Ä–æ—Å–∫–æ–ø
```typescript
interface Horoscope {
  general: string;          // –û–±—â–∏–π –ø—Ä–æ–≥–Ω–æ–∑
  love: string;            // –õ—é–±–æ–≤—å
  career: string;          // –ö–∞—Ä—å–µ—Ä–∞
  health: string;          // –ó–¥–æ—Ä–æ–≤—å–µ
  lucky_numbers: number[]; // –°—á–∞—Å—Ç–ª–∏–≤—ã–µ —á–∏—Å–ª–∞
  lucky_color: string;     // –¶–≤–µ—Ç –¥–Ω—è
  advice: string;          // –°–æ–≤–µ—Ç –¥–Ω—è
  energy_level: number;    // –£—Ä–æ–≤–µ–Ω—å —ç–Ω–µ—Ä–≥–∏–∏ (1-10)
  zodiac_sign: string;     // –ó–Ω–∞–∫ –∑–æ–¥–∏–∞–∫–∞
  date: string;            // –î–∞—Ç–∞
}
```

## üéØ –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

- **–ú–∏–Ω–∏–º—É–º –∂–∞—Ä–≥–æ–Ω–∞**: –î—Ä—É–∂–µ–ª—é–±–Ω—ã–µ —Ñ–æ—Ä–º—É–ª–∏—Ä–æ–≤–∫–∏ –≤–º–µ—Å—Ç–æ —Å–ª–æ–∂–Ω–æ–π —Ç–µ—Ä–º–∏–Ω–æ–ª–æ–≥–∏–∏
- **–ü—Ä–∞–∫—Ç–∏—á–Ω–æ—Å—Ç—å**: –§–æ–∫—É—Å –Ω–∞ –ø—Ä–∏–º–µ–Ω–∏–º—ã—Ö —Å–æ–≤–µ—Ç–∞—Ö –∏ —Ä–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏—è—Ö
- **Telegram-first**: –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–æ –¥–ª—è WebApp –æ–∫—Ä—É–∂–µ–Ω–∏—è
- **–ü—Ä–æ–≥—Ä–µ—Å—Å–∏–≤–Ω–æ–µ —É–ª—É—á—à–µ–Ω–∏–µ**: –†–∞–±–æ—Ç–∞–µ—Ç —Å fallback'–∞–º–∏ –∏ –±–µ–∑ –≤–Ω–µ—à–Ω–∏—Ö API
- **–ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å**: –ö—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ, skeleton states, –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –∑–∞–≥—Ä—É–∑–∫–∏

–ú–æ–¥—É–ª—å –≥–æ—Ç–æ–≤ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –∏ –º–æ–∂–µ—Ç –±—ã—Ç—å –ª–µ–≥–∫–æ –∏–Ω—Ç–µ–≥—Ä–∏—Ä–æ–≤–∞–Ω –≤ —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–µ Telegram –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ!